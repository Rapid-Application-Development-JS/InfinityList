{"version":3,"sources":["radjs-infinitelist.min.js"],"names":["root","factory","define","amd","RADJS_InfiniteList","module","exports","this","propGet","target","key","empty","propSet","value","ItemHolder","index","item","prototype","undefined","position","visible","InfiniteList","container","adapter","direction","Element","firstElementChild","getCount","getItem","toLowerCase","indexOf","elContainer","elWrapper","isVertical","items","itemsInvisible","requestAnimationFrameStep","bind","onScroll","refresh","addEventListener","window","destroy","removeEventListener","state","inAnimation","cancelAnimationFrame","requestAnimationFrameID","innerHTML","itemSize","containerSize","lastIndex","containerPadding","_window","Date","now","performance","webkitNow","mozNow","msNow","oNow","lastTime","vendors","x","length","requestAnimationFrame","callback","currTime","timeToCall","Math","max","id","setTimeout","clearTimeout","elementPadCoord","getBoundingClientRect","fillList","lastPos_elPadCoord","newPosition_elPadCoord","itemsLength","itemHolder","minVisibleIndex","maxVisibleIndex","itemsCount","push","min","floor","abs","applyItem","forEach","hideItem","style","getItemSize","size","appendChild","removeChild","setItemPosition","createNewItemHolder","pop","noDelay","delay","refreshID","offsetHeight","itemLength"],"mappings":"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","file":"radjs-infinitelist.min.js","sourcesContent":["(function (root, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(\"radjs-infinitelist\", function () {\n\t\t\troot.RADJS_InfiniteList = factory();\n\t\t\treturn root.RADJS_InfiniteList;\n\t\t});\n\t} else if (typeof module === \"object\" && module.exports) {\n\t\troot.RADJS_InfiniteList = factory();\n\t\tmodule.exports = root.RADJS_InfiniteList;\n\t} else {\n\t\troot.RADJS_InfiniteList = factory();\n\t}\n}(this, function () {\n\t\"use strict\";\n\nfunction propGet(target, key, empty) {\n\treturn key in target ? target[key] : empty;\n}\n\nfunction propSet(target, key, value) {\n\ttarget[key] = value;\n}\n\n(function (_window) {\n\t_window.Date.now || (_window.Date.now = function () {\n\t\treturn +new Date;\n\t});\n})(window);\n\n(function (_window) {\n\t_window.performance || (_window.performance = {});\n\t_window.performance.now && (_window.performance.now = performance.webkitNow || performance.mozNow || performance.msNow ||\n\t\tperformance.oNow || function () {\n\t\t\treturn Date.now()\n\t\t})\n})(window);\n\n(function (_window) {\n\tvar lastTime = 0;\n\tvar vendors = [\"webkit\", \"moz\", \"ms\", \"o\"];\n\tfor (var x = 0; x < vendors.length && !_window.requestAnimationFrame; ++x) {\n\t\t_window.requestAnimationFrame = _window[vendors[x] + \"RequestAnimationFrame\"];\n\t\t_window.cancelAnimationFrame = _window[vendors[x] + \"CancelAnimationFrame\"]\n\t\t\t|| _window[vendors[x] + \"CancelRequestAnimationFrame\"];\n\t}\n\t_window.requestAnimationFrame || (_window.requestAnimationFrame = function (callback) {\n\t\tvar currTime = Date.now();\n\t\tvar timeToCall = Math.max(0, 16 - (currTime - lastTime));\n\t\tvar id = _window.setTimeout(function () {\n\t\t\t\tcallback(currTime + timeToCall)\n\t\t\t},\n\t\t\ttimeToCall);\n\t\tlastTime = currTime + timeToCall;\n\t\treturn id\n\t});\n\t_window.cancelAnimationFrame || (_window.cancelAnimationFrame = function (id) {\n\t\tclearTimeout(id);\n\t});\n}(window));\n\n/**\n * @param {Number} index\n * @param {Element} item\n * @constructor\n */\nfunction ItemHolder (index, item) {\n\tthis.index = index;\n\tthis.item = item;\n\tItemHolder.prototype = {\n\t\tindex: -1,\n\t\titem: undefined,\n\t\tposition: 0,\n\t\tvisible: true\n\t};\n}\n/**\n * @param {HTMLElement} container\n * @param {Object} adapter\n * @param {String} direction\n * @constructor\n */\nfunction InfiniteList(container, adapter, direction) {\n\tif (container instanceof Element === false) {\n\t\tthrow \"Container is not an HTML element\";\n\t}\n\tif (container.firstElementChild === null) {\n\t\tthrow \"Object's first child element is empty\";\n\t}\n\tif (!adapter || typeof adapter.getCount !== \"function\" || typeof adapter.getItem !== \"function\") {\n\t\tthrow \"Assigned adapter has no support of `getCount` and `getItem` methods\";\n\t}\n\tdirection = (direction + \"\").toLowerCase();\n\tif ([\"h\", \"v\", \"horizontal\", \"vertical\"].indexOf(direction) === -1) {\n\t\tthrow \"Wrong scroll direction [\" + direction + \"]\";\n\t}\n\t// Assign arguments\n\tthis.adapter = adapter; // {getItem, getItem}\n\tthis.elContainer = container; // HTML Element\n\tthis.elWrapper = container.firstElementChild; // HTML Element\n\tthis.isVertical = direction === \"vertical\" || direction === \"v\";\n\t// Construction part\n\tthis.items = []; // Items in scroll\n\tthis.itemsInvisible = []; // Invisile items\n\tthis.requestAnimationFrameStep = this.requestAnimationFrameStep.bind(this);\n\tthis.onScroll = this.onScroll.bind(this);\n\tthis.refresh = this.refresh.bind(this);\n\tcontainer.addEventListener(\"scroll\", this.onScroll, false);\n\twindow.addEventListener(\"resize\", this.refresh, false);\n\t// Create destroy method\n\tthis.destroy = function () {\n\t\tcontainer.removeEventListener(\"scroll\", this.onScroll);\n\t\twindow.removeEventListener(\"resize\", this.refresh);\n\t\tthis.state.inAnimation = false;\n\t\twindow.cancelAnimationFrame(this.requestAnimationFrameID);\n\t\tthis.elWrapper.innerHTML = \"\";\n\t\tthis.adapter = null;\n\t\tthis.elContainer = null;\n\t\tthis.elWrapper = null;\n\t\tthis.items = null;\n\t\tthis.itemsInvisible = null;\n\t\tdelete this.requestAnimationFrameStep;\n\t\tdelete this.onScroll;\n\t\tdelete this.refresh;\n\t};\n\t// Update full status\n\tthis.state = {};\n\t/**\n\t * Is animation happening\n\t * @type {boolean}\n\t */\n\tthis.state.inAnimation = false;\n\t/**\n\t * Heigth or width of item in pixels\n\t * @type {Number}\n\t */\n\tthis.state.itemSize = 0;\n\t/**\n\t * Height or width of container (Window)\n\t * @type {Number}\n\t */\n\tthis.state.containerSize = 0;\n\t/**\n\t * Index of element in bottom / right\n\t * @type {Number}\n\t */\n\tthis.state.lastIndex = -1;\n\t/**\n\t * Top padding from container\n\t * @type {Number}\n\t */\n\tthis.state.containerPadding = 0;\n\tthis.refresh(true);\n}\nInfiniteList.prototype = {\n\tisVertical: undefined,\n\tonScroll: function () {\n\t\t// Stop filling list\n\t\twindow.cancelAnimationFrame(this.requestAnimationFrameID);\n\t\tthis.state.inAnimation = false;\n\t\t// Give it rest\n\t\tthis.requestAnimationFrameID = window.requestAnimationFrame(this.requestAnimationFrameStep);\n\t},\n\trequestAnimationFrameStep: function () {\n\t\tvar elementPadCoord = propGet(this.elWrapper.getBoundingClientRect(), this.isVertical ? \"top\" : \"left\");\n\t\tif (this.state.containerPadding !== elementPadCoord) {\n\t\t\tthis.fillList(this.state.containerPadding, elementPadCoord);\n\t\t\tthis.state.containerPadding = elementPadCoord;\n\t\t}\n\t\t// Start new animation iteration\n\t\tif (this.state.inAnimation) {\n\t\t\tthis.requestAnimationFrameID = window.requestAnimationFrame(this.requestAnimationFrameStep);\n\t\t}\n\t},\n\t/**\n\t * Fill container list with items\n\t * @param {Number} lastPos_elPadCoord\n\t * @param {Number} newPosition_elPadCoord\n\t */\n\tfillList: function (lastPos_elPadCoord, newPosition_elPadCoord) {\n\t\tvar index, itemsLength, itemHolder, itemsCount = this.adapter.getCount(), minVisibleIndex, maxVisibleIndex;\n\t\t// Mark items as `invisible`\n\t\tfor (index = 0, itemsLength = this.items.length; index < itemsLength; index += 1) {\n\t\t\titemHolder = this.items[index];\n\t\t\tif (itemHolder.visible) {\n\t\t\t\t// Mark on top\n\t\t\t\tif ((itemHolder.position + this.state.itemSize + newPosition_elPadCoord) < 0) {\n\t\t\t\t\titemHolder.visible = false;\n\t\t\t\t\tthis.itemsInvisible.push(itemHolder);\n\t\t\t\t}\n\t\t\t\t// Mark on bottom\n\t\t\t\tif ((itemHolder.position + newPosition_elPadCoord) > this.state.containerSize) {\n\t\t\t\t\titemHolder.visible = false;\n\t\t\t\t\tthis.itemsInvisible.push(itemHolder);\n\t\t\t\t\tif (this.state.lastIndex >= itemHolder.index) {\n\t\t\t\t\t\tthis.state.lastIndex = itemHolder.index - 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// Find min and max real visible index\n\t\tfor (index = 0, itemsLength = this.items.length; index < itemsLength; index += 1) {\n\t\t\titemHolder = this.items[index];\n\t\t\tif (itemHolder.visible) {\n\t\t\t\tif (minVisibleIndex === undefined || itemHolder.index < minVisibleIndex) {\n\t\t\t\t\tminVisibleIndex = itemHolder.index;\n\t\t\t\t}\n\t\t\t\tif (maxVisibleIndex === undefined || itemHolder.index > maxVisibleIndex) {\n\t\t\t\t\tmaxVisibleIndex = itemHolder.index;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// If we don't have visible items\n\t\tif (minVisibleIndex === undefined && maxVisibleIndex === undefined) {\n\t\t\t// Create fake bottom index\n\t\t\tthis.state.lastIndex =\n\t\t\t\tMath.min(Math.floor(Math.abs(-newPosition_elPadCoord / this.state.itemSize)), itemsCount) || -1;\n\t\t}\n\t\t// Fill bottom part by new items\n\t\twhile (\n\t\t(this.state.lastIndex < itemsCount - 1)\n\t\t&&\n\t\t(this.state.lastIndex * this.state.itemSize + newPosition_elPadCoord < this.state.containerSize)\n\t\t\t) {\n\t\t\tthis.state.lastIndex += 1;\n\t\t\tthis.applyItem(this.state.lastIndex);\n\t\t}\n\t\t// Fill top part with new items\n\t\tif (typeof minVisibleIndex === \"number\") {\n\t\t\twhile (minVisibleIndex > 0 && minVisibleIndex * this.state.itemSize + newPosition_elPadCoord > 0) {\n\t\t\t\tminVisibleIndex -= 1;\n\t\t\t\tthis.applyItem(minVisibleIndex);\n\t\t\t}\n\t\t}\n\t\t// Hide invisible items\n\t\tthis.itemsInvisible.forEach(this.hideItem, this);\n\t},\n\t/**\n\t * Hide item\n\t * @param {Object} itemHolder\n\t */\n\thideItem: function (itemHolder) {\n\t\tpropSet(itemHolder.item.style, this.isVertical ? \"left\" : \"top\" ,\"200%\");\n\t},\n\t/**\n\t * Get height or width of item\n\t * @return {Number}\n\t */\n\tgetItemSize: function () {\n\t\tvar size, item;\n\t\titem = this.adapter.getItem(0, null);\n\t\tthis.elWrapper.appendChild(item);\n\t\tsize = propGet(item.getBoundingClientRect(), this.isVertical ? \"height\": \"width\");\n\t\tthis.elWrapper.removeChild(item);\n\t\treturn size;\n\t},\n\t/**\n\t * Set item position in container\n\t * @param {Object} itemHolder\n\t */\n\tsetItemPosition: function (itemHolder) {\n\t\tpropSet(itemHolder.item.style, this.isVertical ? \"top\" : \"left\", itemHolder.position + \"px\");\n\t\tpropSet(itemHolder.item.style, this.isVertical ? \"left\" : \"top\" , 0);\n\t},\n\t/**\n\t * Create item holder if not exists\n\t * @param {Number} index\n\t * @return {Object}\n\t */\n\tcreateNewItemHolder: function (index) {\n\t\tvar item = this.adapter.getItem(index, null), itemHolder;\n\t\tthis.elWrapper.appendChild(item);\n\t\titemHolder = new ItemHolder(index, item);\n\t\tthis.items.push(itemHolder);\n\t\treturn itemHolder;\n\t},\n\t/**\n\t * Apply item to container\n\t * @param {Number} index\n\t */\n\tapplyItem: function (index) {\n\t\tvar itemHolder = this.itemsInvisible.pop() || this.createNewItemHolder(index);\n\t\titemHolder.position = index * this.state.itemSize;\n\t\titemHolder.index = index;\n\t\titemHolder.visible = true;\n\t\tthis.adapter.getItem(itemHolder.index, itemHolder.item);\n\t\tthis.setItemPosition(itemHolder);\n\t},\n\t/**\n\t * Refresh scroll\n\t * @param {boolean=true} noDelay\n\t */\n\trefresh: function (noDelay) {\n\t\tvar delay = noDelay ? 0 : 150;\n\t\tclearTimeout(this.refreshID);\n\t\tthis.refreshID = setTimeout(function () {\n\t\t\t// Stop filling\n\t\t\twindow.cancelAnimationFrame(this.requestAnimationFrameID);\n\t\t\tthis.state.inAnimation = false;\n\t\t\t// Update state\n\t\t\tthis.state.containerPadding =\n\t\t\t\tpropGet(this.elWrapper.getBoundingClientRect(), this.isVertical ? \"top\" : \"left\");\n\t\t\tthis.state.itemSize = this.getItemSize();\n\t\t\tthis.state.containerSize = this.elContainer.offsetHeight;\n\t\t\t// Update wrapper size\n\t\t\tpropSet(this.elWrapper.style, this.isVertical ? \"height\" : \"width\",\n\t\t\t\tthis.state.itemSize * this.adapter.getCount() + \"px\");\n\t\t\t// Recalculate items positions\n\t\t\tfor (var index = 0, itemLength = this.items.length; index < itemLength; index += 1) {\n\t\t\t\tthis.items[index].position = this.items[index].index * this.state.itemSize;\n\t\t\t}\n\t\t\t// Fill list\n\t\t\tthis.fillList(this.state.containerPadding, this.state.containerPadding);\n\t\t}.bind(this), delay);\n\t}\n};\n\n\treturn InfiniteList;\n}));\n"],"sourceRoot":"/source/"}